<<<<<<< HEAD
# ðŸ”“ DeFi Attack Lab

ä¸€ä¸ªåŸºäºŽ Hardhat çš„ DeFi æ”»é˜²å®žéªŒå¹³å°ï¼ŒåŒ…å«ä¸¤ä¸ªå…¸åž‹æ”»å‡»æ¡ˆä¾‹ï¼š

- ðŸ§¨ é‡å…¥æ”»å‡»ï¼ˆReentrancy Attackï¼‰
- ðŸ§¨ é¢„è¨€æœºæ“æŽ§æ”»å‡»ï¼ˆOracle Price Manipulationï¼‰

æœ¬é¡¹ç›®é€‚åˆç½‘ç»œå®‰å…¨æ–¹å‘å­¦ç”Ÿã€æ™ºèƒ½åˆçº¦å¼€å‘è€…ã€DeFi å®‰å…¨ç ”ç©¶è€…è¿›è¡Œå­¦ä¹ ã€å®žéªŒå’Œæ‰©å±•ã€‚

---

## ðŸ§  æ”»å‡»åŽŸç†è§£é‡Š

### 1. é‡å…¥æ”»å‡»ï¼ˆReentrancy Attackï¼‰

**æ ¸å¿ƒæ¼æ´ž**ï¼šåˆçº¦åœ¨æ›´æ–°ç”¨æˆ·çŠ¶æ€å‰å…ˆæ‰§è¡Œ `call.value()`ï¼Œå¯¼è‡´æ”»å‡»åˆçº¦é€’å½’è°ƒç”¨ï¼Œé‡å¤æå–èµ„é‡‘ã€‚

æ”»å‡»æµç¨‹ï¼š

1. ç”¨æˆ·å­˜å…¥ ETH åˆ° `Vault`ã€‚
2. æ”»å‡»è€…åˆçº¦è°ƒç”¨ `withdraw()`ã€‚
3. `Vault` è°ƒç”¨æ”»å‡»åˆçº¦ fallbackï¼Œæ”»å‡»è€…å†æ¬¡å‘èµ· `withdraw()`ï¼Œä½™é¢å°šæœªæ›´æ–°ï¼Œé€ æˆå¤šæ¬¡å–æ¬¾ã€‚
4. `Vault` è¢«æŽç©ºã€‚

### 2. é¢„è¨€æœºæ“æŽ§æ”»å‡»ï¼ˆOracle Manipulationï¼‰

**æ ¸å¿ƒæ¼æ´ž**ï¼šLending åè®®ä¾èµ–ä¸€ä¸ªä¸å¯ä¿¡çš„ Oracle åˆçº¦èŽ·å–æŠµæŠ¼å“ä»·æ ¼ï¼Œæ”»å‡»è€…å¯æŽ§åˆ¶ä»·æ ¼å¯¼è‡´ç³»ç»Ÿé«˜ä¼°æŠµæŠ¼å“ä»·å€¼ã€‚

æ”»å‡»æµç¨‹ï¼š

1. æ”»å‡»è€…å°† Oracle æŠ¥ä»·äººä¸ºè®¾ç½®ä¸ºé«˜ä»·ã€‚
2. å­˜å…¥æžå°‘ ETH æŠµæŠ¼ï¼Œå´å› é«˜ä¼°ä»·å€¼èƒ½å€Ÿå‡ºè¿œè¶…æŠµæŠ¼ä»·å€¼çš„ ETHã€‚
3. æ”»å‡»åˆçº¦å®Œæˆå¥—åˆ©ã€‚

---

## ðŸ§© åˆçº¦åŠŸèƒ½ä»‹ç»

### `Vault.sol`

ä¸€ä¸ªç®€å•çš„ ETH é‡‘åº“åˆçº¦ï¼Œå…è®¸ç”¨æˆ·å­˜æ¬¾å’Œå–æ¬¾ã€‚å­˜åœ¨é‡å…¥æ”»å‡»æ¼æ´žã€‚

### `VaultAttack.sol`

æ”»å‡»è€…åˆçº¦ï¼Œé€šè¿‡é‡å…¥æ–¹å¼é€’å½’è°ƒç”¨ç›®æ ‡åˆçº¦çš„ `withdraw()`ï¼Œåå¤ç›—å–èµ„é‡‘ã€‚

### `PriceOracle.sol`

ä¸€ä¸ªç®€åŒ–çš„é¢„è¨€æœºï¼Œå…è®¸ä»»æ„ç”¨æˆ·è®¾ç½®ä»·æ ¼ï¼Œç”¨äºŽæ¨¡æ‹Ÿè¢«æ”»å‡»çš„åœºæ™¯ã€‚

### `LendingProtocol.sol`

ä¸€ä¸ªä¾èµ– Oracle æŠ¥ä»·è¿›è¡ŒæŠµæŠ¼å€Ÿè´·çš„åè®®ï¼Œå…è®¸ç”¨æˆ·å­˜å…¥ ETH ä½œä¸ºæŠµæŠ¼å€Ÿå‡ºèµ„é‡‘ã€‚

### `OracleLendingAttack.sol`

æ”»å‡»è€…åˆçº¦ï¼Œå…ˆæ“æŽ§ Oracle æŠ¥ä»·ä¸ºé«˜ä»·ï¼Œä¼ªé€ é«˜ä»·å€¼æŠµæŠ¼ï¼Œä»Žåè®®ä¸­å€Ÿå‡ºè¶…é¢èµ„é‡‘ã€‚

---

## ðŸ› ï¸ æœ¬åœ°éƒ¨ç½²ä¸Žè¿è¡Œ

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. ç¼–è¯‘åˆçº¦

```bash
npx hardhat compile
```

### 3. è¿è¡Œæ”»å‡»è„šæœ¬
é‡å…¥æ”»å‡»ï¼š
```bash
npx hardhat run scripts/runVaultAttack.js
```
é¢„è¨€æœºæ”»å‡»ï¼š
```bash
npx hardhat run scripts/runOracleLendingAttack.js
```

---

## ðŸ“ å…è´£å£°æ˜Ž

æœ¬é¡¹ç›®ä»…ç”¨äºŽæ•™è‚²å’Œç ”ç©¶ç›®çš„ï¼Œä¸æž„æˆä»»ä½•å½¢å¼çš„æ³•å¾‹å»ºè®®æˆ–ä¿è¯ã€‚ä½¿ç”¨æœ¬é¡¹ç›®çš„åˆçº¦è¿›è¡Œæ”»å‡»å¯èƒ½å¯¼è‡´ä¸¥é‡æŸå¤±ï¼Œé£Žé™©ç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚
=======
# defi-attack-lab
>>>>>>> e6766d0361fb49d9489dd6827343479a77b43b3d
